(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[789],{543:function(e,s,t){Promise.resolve().then(t.bind(t,4786))},4786:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return X}});var a=t(7437),l=t(2265),n=t(220),o=t(6951),r=t(9744),d=t(1121),i=t(2609),c=t(3023),u=t(1908),m=t(6672),x=t(9155),h=t(1827),f=t(3732);let p=[{id:"sepolia",name:"Sepolia Testnet",icon:"\uD83D\uDD37",description:"Ethereum testnet for development",color:"bg-blue-100 border-blue-300 text-blue-700"},{id:"amoy",name:"Polygon Amoy",icon:"\uD83D\uDFE3",description:"Polygon testnet for development",color:"bg-purple-100 border-purple-300 text-purple-700"},{id:"neon",name:"Neon EVM",icon:"\uD83D\uDFE2",description:"Solana-compatible EVM",color:"bg-green-100 border-green-300 text-green-700"}];function g(e){let{isOpen:s,onClose:t,onWalletCreated:r}=e,{user:g}=(0,n.useAuth)(),{sdk:v,canMakeRequests:j}=(0,o.e)();console.log("\uD83D\uDD0D CreateWalletModal props:",{isOpen:s,onClose:!!t,onWalletCreated:!!r}),console.log("\uD83D\uDD0D CreateWalletModal state - user:",!!g,"sdk:",!!v,"canMakeRequests:",j),(0,l.useEffect)(()=>{console.log("\uD83D\uDD0D CreateWalletModal isOpen changed to:",s)},[s]);let[b,N]=(0,l.useState)(""),[w,y]=(0,l.useState)([]),[D,k]=(0,l.useState)(""),[_,C]=(0,l.useState)(!1),[S,A]=(0,l.useState)(null),T=p.filter(e=>e.name.toLowerCase().includes(D.toLowerCase())||e.description.toLowerCase().includes(D.toLowerCase())),I=e=>{y(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},E=async()=>{var e,s,t,a,l,n,o,d,i,c,u;if(A(null),!j){A("SDK is not ready. Please wait a moment and try again.");return}if(!(null==g?void 0:g.user_id)){A("User not authenticated. Please log in again.");return}if(!b.trim()){A("Please enter a wallet name");return}try{C(!0),A(null);let o="string"==typeof g.user_id?parseInt(g.user_id):g.user_id;console.log("Creating wallet with data:",{wallet_name:b.trim(),user_id:o});let d=await v.cryptoWallet.createWallet({wallet_name:b.trim(),user_id:o});if(console.log("Create wallet response:",d),!(null==d?void 0:d.success)){let s=(null==d?void 0:null===(e=d.error)||void 0===e?void 0:e.message)||(null==d?void 0:d.message)||"Failed to create wallet";throw Error(s)}let i=d.data,c=null==i?void 0:i.bw_id;if(!c)throw Error("Wallet created but no ID returned");console.log("Wallet created successfully with bw_id: ".concat(c));let u=[];if(w.length>0)for(let e of(console.log("Adding ".concat(w.length," blockchains to wallet ").concat(c)),w))try{console.log("Adding chain ".concat(e," to wallet ").concat(c));let n=await v.cryptoWallet.addChainAddress(c,{chain_id:e});console.log("Chain ".concat(e," response:"),n),(null==n?void 0:n.success)?(u.push({chain:e,success:!0,address:null===(s=n.data)||void 0===s?void 0:s.wallet_address,mnemonic:null===(t=n.data)||void 0===t?void 0:t.mnemonic}),console.log("✅ Successfully added ".concat(e," to wallet"))):(u.push({chain:e,success:!1,error:(null==n?void 0:null===(a=n.error)||void 0===a?void 0:a.message)||"Unknown error"}),console.warn("❌ Failed to add ".concat(e,":"),null==n?void 0:null===(l=n.error)||void 0===l?void 0:l.message))}catch(s){console.error("Error adding ".concat(e," to wallet:"),s),u.push({chain:e,success:!1,error:s.message||"Network error"})}let m=u.filter(e=>e.success),x=u.filter(e=>!e.success);if(console.log("Chain addition summary:",{successful:m.length,failed:x.length,results:u}),x.length>0){let e=x.map(e=>e.chain).join(", ");console.warn("Some chains failed to add: ".concat(e))}if(m.length>0){let e=null===(n=m[0])||void 0===n?void 0:n.mnemonic;e&&alert("Wallet created successfully!\n\nIMPORTANT: Please backup your mnemonic phrase:\n".concat(e,"\n\nThis will not be shown again!"))}console.log("Wallet creation completed successfully"),r(),z()}catch(s){console.error("Failed to create wallet:",s);let e="Failed to create wallet";s.message?e=s.message:(null===(i=s.response)||void 0===i?void 0:null===(d=i.data)||void 0===d?void 0:null===(o=d.error)||void 0===o?void 0:o.message)?e=s.response.data.error.message:(null===(u=s.response)||void 0===u?void 0:null===(c=u.data)||void 0===c?void 0:c.message)&&(e=s.response.data.message),A(e)}finally{C(!1)}},z=()=>{_||(N(""),y([]),k(""),A(null),t())};return(console.log("\uD83D\uDD0D CreateWalletModal rendering with isOpen:",s),s)?(0,a.jsx)(i.Vq,{open:s,onOpenChange:z,children:(0,a.jsxs)(i.cZ,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[(0,a.jsx)(i.fK,{children:(0,a.jsxs)(i.$N,{className:"flex items-center gap-2",children:[(0,a.jsx)(f.ZP,{size:"sm",showText:!1}),(0,a.jsx)("span",{children:"Add New Wallet"}),_&&(0,a.jsx)(d.T,{size:"sm"}),(0,a.jsxs)("span",{className:"text-xs text-muted-foreground ml-2",children:["(Modal: ",s?"Open":"Closed",")"]})]})}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(m._,{htmlFor:"walletName",children:["Wallet Name ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)(u.I,{id:"walletName",placeholder:"My Wallet",value:b,onChange:e=>N(e.target.value),disabled:_,className:S&&!b.trim()?"border-red-500":""}),S&&!b.trim()&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:"Wallet name is required"})]}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Name this new wallet and add one or more blockchains in order to create an address for each blockchain added. Additional blockchains can be added to the wallet later."}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(m._,{children:"Add blockchains to wallet"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(h.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(u.I,{placeholder:"Find a Blockchain",value:D,onChange:e=>k(e.target.value),className:"pl-10",disabled:_})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-muted-foreground",children:"Testnets"}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-3",children:T.map(e=>(0,a.jsx)("div",{className:"\n                      relative p-4 border rounded-lg cursor-pointer transition-all hover:shadow-sm\n                      ".concat(w.includes(e.id)?"border-blue-500 bg-blue-50 dark:bg-blue-950/20":"border-gray-200 hover:border-gray-300","\n                      ").concat(_?"opacity-50 cursor-not-allowed":"","\n                    "),onClick:()=>!_&&I(e.id),children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"text-2xl",children:e.icon}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("h3",{className:"font-medium text-sm",children:e.name}),w.includes(e.id)&&(0,a.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:e.description})]})]})},e.id))})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[(0,a.jsxs)("span",{children:[w.length," Selected"]}),w.length>0&&(0,a.jsx)("div",{className:"flex gap-1 flex-wrap",children:w.map(e=>{let s=p.find(s=>s.id===e);return s?(0,a.jsxs)(x.C,{variant:"secondary",className:"text-xs",children:[s.icon," ",s.name]},e):null})})]})]}),S&&(0,a.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,a.jsx)("p",{className:"text-sm text-red-600",children:S})}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[(0,a.jsx)(c.z,{variant:"outline",onClick:z,disabled:_,children:"Cancel"}),(0,a.jsx)(c.z,{onClick:E,disabled:!b.trim()||_||!j||!(null==g?void 0:g.user_id),className:"min-w-[120px]",children:_?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.T,{size:"sm"}),(0,a.jsx)("span",{className:"ml-2",children:"Creating..."})]}):j?(null==g?void 0:g.user_id)?"Create Wallet":"Not Authenticated":"SDK Loading..."})]})]})]})}):null}var v=t(8094),j=t(4530),b=t(4056),N=t(4631);let w=[{id:"sepolia",name:"Sepolia Testnet",icon:"\uD83D\uDD37",testnet:!0},{id:"amoy",name:"Polygon Amoy",icon:"\uD83D\uDFE3",testnet:!0},{id:"neon",name:"Neon EVM",icon:"\uD83D\uDFE2",testnet:!0}];function y(e){var s,t;let{isOpen:r,onClose:x,onTokenImported:h,selectedWallet:p}=e,{user:g}=(0,n.useAuth)(),{sdk:y,canMakeRequests:D}=(0,o.e)(),[k,_]=(0,l.useState)(""),[C,S]=(0,l.useState)(""),[A,T]=(0,l.useState)(!1),[I,E]=(0,l.useState)(null),[z,F]=(0,l.useState)(null),P=e=>/^0x[a-fA-F0-9]{40}$/.test(e),W=()=>k?C.trim()?P(C.trim())?null:"Please enter a valid Ethereum address (0x...)":"Please enter a token contract address":"Please select a blockchain",Z=async()=>{var e,s,t,a,l,n,o,r,d,i;if(!D||!(null==g?void 0:g.user_id))return;let c=W();if(c){E(c);return}try{T(!0),E(null),F(null),console.log("=== IMPORT TOKEN WITH USER_ID ==="),console.log("Chain:",k),console.log("Token Address:",C.trim()),console.log("User ID:",g.user_id),console.log("===============================");let s="string"==typeof g.user_id?parseInt(g.user_id):g.user_id,t=await y.cryptoWallet.tokens.import({chain_id:k,asset_issuer:C.trim(),user_id:s});if(console.log("Import response:",t),!(null==t?void 0:t.success)){let s=(null==t?void 0:null===(e=t.error)||void 0===e?void 0:e.message)||(null==t?void 0:t.message)||"Failed to import token";throw Error(s)}F(t.data),console.log("Token imported successfully:",t.data);let{token_info:a,imported_to_wallets:l,wallet_details:n}=t.data,o="Successfully imported ".concat(a.symbol," (").concat(a.name,") to ").concat(l," wallet(s) on ").concat(k," chain.");if(n&&n.length>0){let e=n.map(e=>e.wallet_name).join(", ");o+="\n\nWallets updated: ".concat(e)}console.log("Success message:",o),h(),setTimeout(()=>{R()},3e3)}catch(c){console.error("Failed to import token:",c),F(null);let e=c.message||"Failed to import token";(null===(s=c.message)||void 0===s?void 0:s.includes("already imported"))||(null===(t=c.message)||void 0===t?void 0:t.includes("TOKEN_ALREADY_EXISTS"))?e="This token is already imported to your wallets on this chain":(null===(a=c.message)||void 0===a?void 0:a.includes("Invalid token"))||(null===(l=c.message)||void 0===l?void 0:l.includes("INVALID_TOKEN_ADDRESS"))?e="Invalid token contract address. Please verify the address and try again.":(null===(n=c.message)||void 0===n?void 0:n.includes("Unsupported chain"))||(null===(o=c.message)||void 0===o?void 0:o.includes("UNSUPPORTED_CHAIN"))?e="Chain ".concat(k," is not supported"):(null===(r=c.message)||void 0===r?void 0:r.includes("No wallets found"))||(null===(d=c.message)||void 0===d?void 0:d.includes("NO_WALLETS_ON_CHAIN"))?e="No wallets found with ".concat(k," addresses. Please add a ").concat(k," address to your wallet first."):(null===(i=c.message)||void 0===i?void 0:i.includes("MISSING_USER_ID"))&&(e="User authentication failed. Please refresh and try again."),E(e)}finally{T(!1)}},R=()=>{A||(_(""),S(""),E(null),F(null),x())};return(0,a.jsx)(i.Vq,{open:r,onOpenChange:R,children:(0,a.jsxs)(i.cZ,{className:"max-w-md",children:[(0,a.jsx)(i.fK,{children:(0,a.jsxs)(i.$N,{className:"flex items-center gap-2",children:[(0,a.jsx)(f.ZP,{size:"sm",showText:!1}),(0,a.jsx)("span",{children:"Import Token"}),A&&(0,a.jsx)(d.T,{size:"sm"})]})}),(0,a.jsxs)("div",{className:"space-y-6",children:[z&&(0,a.jsx)("div",{className:"p-4 bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-800 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(j.Z,{className:"h-5 w-5 text-green-600 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"font-medium text-green-800 dark:text-green-200 mb-2",children:"Token Imported Successfully!"}),(0,a.jsxs)("div",{className:"text-sm text-green-700 dark:text-green-300 space-y-1",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:null===(s=z.token_info)||void 0===s?void 0:s.symbol})," (",null===(t=z.token_info)||void 0===t?void 0:t.name,")"]}),(0,a.jsxs)("p",{children:["Imported to ",(0,a.jsxs)("strong",{children:[z.imported_to_wallets," wallet(s)"]})," on ",z.chain_id]}),z.wallet_details&&(0,a.jsxs)("div",{className:"mt-2 text-xs",children:[(0,a.jsx)("p",{className:"font-medium",children:"Affected wallets:"}),z.wallet_details.map((e,s)=>(0,a.jsxs)("p",{children:["• ",e.wallet_name]},s))]})]})]})]})}),(0,a.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[(0,a.jsx)(b.Z,{className:"h-5 w-5 text-blue-600 flex-shrink-0 mt-0.5"}),(0,a.jsx)("p",{className:"text-sm text-blue-800 dark:text-blue-200 leading-relaxed",children:"Import a token to all your wallets that have addresses on the selected blockchain. The token will be monitored and balances will appear in your wallet."})]}),p&&(0,a.jsxs)("div",{className:"p-3 bg-muted/50 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Import context:"}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Will import to all your wallets with ",k||"selected chain"," addresses"]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(m._,{htmlFor:"blockchain",children:["Blockchain ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsxs)(v.Ph,{value:k,onValueChange:e=>{_(e),E(null),F(null)},disabled:A,children:[(0,a.jsx)(v.i4,{id:"blockchain",children:(0,a.jsx)(v.ki,{placeholder:"Select blockchain"})}),(0,a.jsx)(v.Bw,{children:w.map(e=>(0,a.jsx)(v.Ql,{value:e.id,children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{children:e.icon}),(0,a.jsx)("span",{children:e.name}),e.testnet&&(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"Testnet"})]})},e.id))})]}),I&&!k&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:"Blockchain is required"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(m._,{htmlFor:"tokenAddress",children:["Token Contract Address ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)(u.I,{id:"tokenAddress",placeholder:"0x...",value:C,onChange:e=>{S(e.target.value.trim()),E(null),F(null)},disabled:A,className:"font-mono text-sm ".concat(I&&!P(C.trim())?"border-red-500":"")}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Enter the smart contract address of the token (e.g., USDC, USDT, DAI)"}),I&&C&&!P(C.trim())&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:"Please enter a valid contract address"})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3 p-4 bg-orange-50 dark:bg-orange-950/20 border border-orange-200 dark:border-orange-800 rounded-lg",children:[(0,a.jsx)(N.Z,{className:"h-5 w-5 text-orange-600 flex-shrink-0 mt-0.5"}),(0,a.jsx)("p",{className:"text-sm text-orange-800 dark:text-orange-200",children:"Only import tokens from trusted sources. Verify the contract address on the blockchain explorer before importing."})]}),I&&(0,a.jsx)("div",{className:"p-3 bg-red-50 dark:bg-red-950/20 border border-red-200 dark:border-red-800 rounded-lg",children:(0,a.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400",children:I})}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[(0,a.jsx)(c.z,{variant:"outline",onClick:R,disabled:A,children:"Cancel"}),(0,a.jsx)(c.z,{onClick:Z,disabled:!k||!C.trim()||!P(C.trim())||A,className:"min-w-[100px]",children:A?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.T,{size:"sm"}),(0,a.jsx)("span",{className:"ml-2",children:"Importing..."})]}):"Import Token"})]})]})]})})}var D=t(4280),k=t(2549),_=t(9883),C=t(6224),S=t(5234);let A={sepolia:"\uD83D\uDD37",amoy:"\uD83D\uDFE3",neon:"\uD83D\uDFE2",ethereum:"⚪",polygon:"\uD83D\uDFE3",bnb:"\uD83D\uDFE1"},T=e=>({sepolia:"Sepolia Testnet",amoy:"Polygon Amoy",neon:"Neon EVM"})[e]||e.charAt(0).toUpperCase()+e.slice(1),I=(e,s,t)=>(null==s?void 0:s.native_symbol)||(null==t?void 0:t.native_symbol)||({sepolia:"ETH",amoy:"MATIC",neon:"NEON"})[e]||"UNKNOWN";function E(e){var s;let{wallet:t,isOpen:r,onClose:i,onImportToken:m}=e,{user:x}=(0,n.useAuth)(),[p,g]=(0,l.useState)("tokens"),[v,j]=(0,l.useState)(""),[b,N]=(0,l.useState)({}),[w,y]=(0,l.useState)({}),[E,z]=(0,l.useState)(!1),[F,P]=(0,l.useState)(!1),[W,Z]=(0,l.useState)([]),[R,U]=(0,l.useState)(!1),[O,L]=(0,l.useState)(new Date),{sdk:B,canMakeRequests:V}=(0,o.e)();if((0,l.useEffect)(()=>{(null==t?void 0:t.bw_id)&&"tokens"===p&&V&&M()},[null==t?void 0:t.bw_id,p,V]),(0,l.useEffect)(()=>{if(!(null==t?void 0:t.bw_id)||"tokens"!==p||!V)return;let e=setInterval(()=>{console.log("\uD83D\uDD04 Auto-refreshing balances..."),M(),L(new Date)},3e4);return()=>clearInterval(e)},[null==t?void 0:t.bw_id,p,V]),!t)return null;let M=async()=>{if(t&&V&&(null==x?void 0:x.user_id)){console.log("\uD83D\uDD04 Fetching wallet data for bw_id:",t.bw_id),console.log("\uD83D\uDD04 Fetching wallet data for user_id:",x.user_id);try{var e,s,a,l,n;z(!0),P(!0),U(!0);let o=await B.cryptoWallet.getWalletAddresses(t.bw_id);console.log("\uD83D\uDCCD RAW API Response:",o),console.log("\uD83D\uDCCD Response data addresses:",null==o?void 0:null===(e=o.data)||void 0===e?void 0:e.addresses),console.log("\uD83D\uDCCD Addresses array length:",null==o?void 0:null===(a=o.data)||void 0===a?void 0:null===(s=a.addresses)||void 0===s?void 0:s.length),(null==o?void 0:o.success)&&(null==o?void 0:null===(l=o.data)||void 0===l?void 0:l.addresses)&&Array.isArray(o.data.addresses)?(console.log("✅ Setting walletAddresses to:",o.data.addresses),Z(o.data.addresses)):(console.log("❌ No addresses found - setting empty array"),Z([])),U(!1);let r="string"==typeof x.user_id?parseInt(x.user_id):x.user_id,d=await B.cryptoWallet.tokens.getImported(r);console.log("\uD83C\uDFAF User tokens API response:",d),(null==d?void 0:d.success)&&(null==d?void 0:d.data)?(N(d.data),console.log("✅ User tokens loaded:",d.data)):(N({}),console.log("❌ No tokens found or API failed")),z(!1);try{let e=await B.cryptoWallet.balance.getTotal(t.bw_id);console.log("\uD83D\uDCB0 Balance API response:",e),(null==e?void 0:e.success)&&(null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.chains)?(y(e.data.chains),console.log("✅ Chain balances loaded:",e.data.chains)):(y({}),console.log("❌ No balance data found"))}catch(e){console.error("\uD83D\uDCB0 Balance API error (skipping):",e),y({})}P(!1)}catch(e){console.error("❌ Failed to fetch wallet data:",e),N({}),y({}),Z([]),z(!1),P(!1),U(!1)}}},Q=()=>{m&&t&&m(t)},$=(null==b?void 0:b.tokens_by_chain)||{};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-black/20 z-40 transition-opacity duration-300 ".concat(r?"opacity-100":"opacity-0 pointer-events-none"),onClick:i}),(0,a.jsxs)("div",{className:"\n        fixed top-0 right-0 h-full w-96 bg-background border-l shadow-xl z-50\n        transform transition-transform duration-300 ease-in-out flex flex-col\n        ".concat(r?"translate-x-0":"translate-x-full","\n      "),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(f.ZP,{size:"sm",showText:!1}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"font-semibold text-lg",children:t.wallet_name}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["bw_id: ",t.bw_id," | ≈ $",(null===(s=t.total_value_usd)||void 0===s?void 0:s.toFixed(2))||"0.00"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(c.z,{variant:"ghost",size:"sm",onClick:()=>{console.log("\uD83D\uDD04 Manual refresh triggered..."),M()},children:(0,a.jsx)(D.Z,{className:"h-4 w-4"})}),(0,a.jsx)(c.z,{variant:"ghost",size:"sm",onClick:i,children:(0,a.jsx)(k.Z,{className:"h-5 w-5"})})]})]}),(0,a.jsx)("div",{className:"px-6 py-2 bg-muted/20 border-b text-xs text-muted-foreground",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{children:["Last updated: ",O.toLocaleTimeString()]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),(0,a.jsx)("span",{children:"Auto-refresh enabled"})]})]})}),(0,a.jsxs)("div",{className:"flex border-b",children:[(0,a.jsxs)("button",{className:"flex-1 px-4 py-3 text-sm font-medium border-b-2 transition-colors ".concat("tokens"===p?"border-blue-500 text-blue-600 bg-blue-50/50":"border-transparent text-muted-foreground hover:text-foreground"),onClick:()=>g("tokens"),children:["Tokens (",(null==b?void 0:b.total_imported)||0,")"]}),(0,a.jsx)("button",{className:"flex-1 px-4 py-3 text-sm font-medium border-b-2 transition-colors ".concat("defi"===p?"border-blue-500 text-blue-600 bg-blue-50/50":"border-transparent text-muted-foreground hover:text-foreground"),onClick:()=>g("defi"),children:"DeFi Positions"}),(0,a.jsx)("button",{className:"flex-1 px-4 py-3 text-sm font-medium border-b-2 transition-colors ".concat("risks"===p?"border-blue-500 text-blue-600 bg-blue-50/50":"border-transparent text-muted-foreground hover:text-foreground"),onClick:()=>g("risks"),children:"Risks"})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto",children:["tokens"===p&&(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("div",{className:"relative mb-4",children:[(0,a.jsx)(h.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(u.I,{placeholder:"Find by address, blockchain, token or token + blockchain",value:v,onChange:e=>j(e.target.value),className:"pl-10"})]}),(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsxs)(c.z,{variant:"outline",className:"w-full",onClick:Q,disabled:E,children:[(0,a.jsx)(_.Z,{className:"h-4 w-4 mr-2"}),"Import Token"]})}),(E||F||R)&&(0,a.jsxs)("div",{className:"text-center py-4",children:[(0,a.jsx)(d.T,{}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:"Loading wallet data..."})]}),(0,a.jsx)("div",{className:"space-y-3",children:W&&W.length>0?W.map((e,s)=>{var t;let l=e.chain_id,n=$[l]||[],o=w[l];return(0,a.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-lg",children:A[l]||"⚫"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium",children:T(l)}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,a.jsxs)("p",{className:"text-xs text-muted-foreground font-mono",children:[e.wallet_address.slice(0,8),"...",e.wallet_address.slice(-6)]}),(0,a.jsx)(c.z,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0",onClick:()=>navigator.clipboard.writeText(e.wallet_address),children:(0,a.jsx)(C.Z,{className:"h-3 w-3"})})]})]})]}),(0,a.jsx)("div",{className:"text-right",children:(0,a.jsxs)("p",{className:"font-medium",children:["≈ $",(null==o?void 0:null===(t=o.total_usd)||void 0===t?void 0:t.toFixed(2))||"0.00"]})})]}),(0,a.jsx)("div",{className:"mb-3 p-3 bg-muted/30 rounded",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(S.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"font-medium",children:I(l,o,e)})]}),(0,a.jsx)("div",{className:"text-right",children:(0,a.jsx)("p",{className:"font-mono text-sm",children:(null==o?void 0:o.native_balance)?parseFloat(o.native_balance).toFixed(4):"0.0000"})})]})}),n.length>0?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("h4",{className:"text-sm font-medium text-muted-foreground",children:["Imported Tokens (",n.length,")"]}),n.map((e,s)=>{var t,l,n,r;let d=null==o?void 0:null===(t=o.tokens)||void 0===t?void 0:t.find(s=>{var t,a;return s.symbol===e.symbol||(null===(t=s.contract_address)||void 0===t?void 0:t.toLowerCase())===(null===(a=e.contract_address)||void 0===a?void 0:a.toLowerCase())}),i=(null==d?void 0:d.balance)||"0.00",c=(null==d?void 0:d.value_usd)||0;return(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 border rounded",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-xs",children:(null===(l=e.symbol)||void 0===l?void 0:l.charAt(0))||"?"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-sm",children:e.symbol||"Unknown"}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground font-mono",children:[null===(n=e.contract_address)||void 0===n?void 0:n.slice(0,6),"...",null===(r=e.contract_address)||void 0===r?void 0:r.slice(-4)]}),d&&(0,a.jsx)("p",{className:"text-xs text-green-600",children:"Balance found"})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"font-mono text-sm",children:parseFloat(i).toFixed(2)}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["$",c.toFixed(2)]})]})]},s)})]}):(0,a.jsxs)("div",{className:"text-center py-4 text-muted-foreground",children:[(0,a.jsxs)("p",{className:"text-sm",children:["No imported tokens on ",T(l)]}),(0,a.jsxs)(c.z,{variant:"ghost",size:"sm",className:"mt-2 text-blue-600",onClick:Q,children:[(0,a.jsx)(_.Z,{className:"h-3 w-3 mr-1"}),"Import token for ",T(l)]})]}),(null==o?void 0:o.tokens)&&o.tokens.length>0&&(0,a.jsxs)("div",{className:"mt-3 space-y-2",children:[(0,a.jsxs)("h4",{className:"text-sm font-medium text-muted-foreground",children:["All Tokens on ",T(l)]}),o.tokens.map((e,s)=>{var t,l,n;return(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 bg-green-50 border border-green-200 rounded",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-6 h-6 bg-green-200 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-xs",children:(null===(t=e.symbol)||void 0===t?void 0:t.charAt(0))||"?"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-sm",children:e.symbol}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:e.name}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground font-mono",children:[null===(l=e.contract_address)||void 0===l?void 0:l.slice(0,6),"...",null===(n=e.contract_address)||void 0===n?void 0:n.slice(-4)]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"font-mono text-sm font-bold",children:parseFloat(e.balance).toFixed(2)}),(0,a.jsxs)("p",{className:"text-xs text-green-600",children:["$",e.value_usd.toFixed(2)]})]})]},s)})]})]},e.address_id||s)}):(0,a.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:R?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.T,{}),(0,a.jsx)("p",{children:"Loading addresses..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{children:"No chains found for this wallet"}),(0,a.jsxs)(c.z,{variant:"outline",size:"sm",className:"mt-2",children:[(0,a.jsx)(_.Z,{className:"h-4 w-4 mr-2"}),"Add Chain"]})]})})}),W.length>0&&0===Object.keys($).length&&!E&&(0,a.jsxs)("div",{className:"text-center py-8 border-2 border-dashed border-muted rounded-lg mt-4",children:[(0,a.jsxs)("div",{className:"text-muted-foreground mb-4",children:[(0,a.jsx)(_.Z,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),(0,a.jsx)("h3",{className:"font-medium mb-2",children:"No tokens imported yet"}),(0,a.jsx)("p",{className:"text-sm",children:"Import your first token to start tracking balances"})]}),(0,a.jsxs)(c.z,{onClick:Q,children:[(0,a.jsx)(_.Z,{className:"h-4 w-4 mr-2"}),"Import Token"]})]})]}),"defi"===p&&(0,a.jsx)("div",{className:"p-4",children:(0,a.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:(0,a.jsx)("p",{children:"No DeFi positions found"})})}),"risks"===p&&(0,a.jsx)("div",{className:"p-4",children:(0,a.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:(0,a.jsx)("p",{children:"No risks detected"})})})]}),(0,a.jsx)("div",{className:"p-4 border-t bg-muted/20",children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(c.z,{variant:"outline",className:"flex-1",children:"Send"}),(0,a.jsx)(c.z,{variant:"outline",className:"flex-1",children:"Receive"}),(0,a.jsx)(c.z,{variant:"outline",className:"flex-1",children:"Swap"})]})})]})]})}var z=t(5817),F=t(4705),P=t(9534),W=t(3589),Z=t(5367),R=t(3291),U=t(7158),O=t(2442),L=t(6369),B=t(9311);let V=R.fC,M=R.xz;R.ZA,R.Uv,R.Tr,R.Ee;let Q=l.forwardRef((e,s)=>{let{className:t,inset:l,children:n,...o}=e;return(0,a.jsxs)(R.fF,{ref:s,className:(0,B.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",l&&"pl-8",t),...o,children:[n,(0,a.jsx)(U.Z,{className:"ml-auto h-4 w-4"})]})});Q.displayName=R.fF.displayName;let $=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(R.tu,{ref:s,className:(0,B.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...l})});$.displayName=R.tu.displayName;let K=l.forwardRef((e,s)=>{let{className:t,sideOffset:l=4,...n}=e;return(0,a.jsx)(R.Uv,{children:(0,a.jsx)(R.VY,{ref:s,sideOffset:l,className:(0,B.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})})});K.displayName=R.VY.displayName;let q=l.forwardRef((e,s)=>{let{className:t,inset:l,...n}=e;return(0,a.jsx)(R.ck,{ref:s,className:(0,B.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",l&&"pl-8",t),...n})});q.displayName=R.ck.displayName;let Y=l.forwardRef((e,s)=>{let{className:t,children:l,checked:n,...o}=e;return(0,a.jsxs)(R.oC,{ref:s,className:(0,B.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...o,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(R.wU,{children:(0,a.jsx)(O.Z,{className:"h-4 w-4"})})}),l]})});Y.displayName=R.oC.displayName;let H=l.forwardRef((e,s)=>{let{className:t,children:l,...n}=e;return(0,a.jsxs)(R.Rk,{ref:s,className:(0,B.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(R.wU,{children:(0,a.jsx)(L.Z,{className:"h-2 w-2 fill-current"})})}),l]})});H.displayName=R.Rk.displayName;let G=l.forwardRef((e,s)=>{let{className:t,inset:l,...n}=e;return(0,a.jsx)(R.__,{ref:s,className:(0,B.cn)("px-2 py-1.5 text-sm font-semibold",l&&"pl-8",t),...n})});G.displayName=R.__.displayName;let J=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(R.Z0,{ref:s,className:(0,B.cn)("-mx-1 my-1 h-px bg-muted",t),...l})});function X(){let{isAuthenticated:e,ekycStatus:s,isLoading:t}=(0,n.useRequireAuth)(),{user:i}=(0,n.useAuth)(),{sdk:m,isReady:f,canMakeRequests:p}=(0,o.e)(),[j,b]=(0,l.useState)([]),[N,w]=(0,l.useState)(!0),[D,k]=(0,l.useState)(""),[S,A]=(0,l.useState)("all"),[T,I]=(0,l.useState)("all"),[R,U]=(0,l.useState)("name"),[O,L]=(0,l.useState)(!1),[B,Q]=(0,l.useState)(!1),[$,Y]=(0,l.useState)(null),[H,G]=(0,l.useState)(null),[J,X]=(0,l.useState)(null),[ee,es]=(0,l.useState)(!1),[et,ea]=(0,l.useState)(0),el=async e=>{if(!p)return 0;try{console.log("\uD83D\uDD0D Calculating balance for wallet: ".concat(e.wallet_name," (bw_id: ").concat(e.bw_id,")"));let t=0;try{var s;console.log("\uD83D\uDCE1 Trying getTotal API for wallet ".concat(e.bw_id,"..."));let a=await m.cryptoWallet.balance.getTotal(e.bw_id);if(console.log("\uD83D\uDCCA Balance API response:",a),(null==a?void 0:a.success)&&(null==a?void 0:null===(s=a.data)||void 0===s?void 0:s.chains))return console.log("\uD83D\uDD17 Found chains in balance response:",a.data.chains),Object.values(a.data.chains).forEach(e=>{if(console.log("\uD83D\uDCB0 Processing chain balance:",e),e.native_balance&&parseFloat(e.native_balance.balance||"0")>0){let s=e.native_balance.value_usd||0;console.log("\uD83D\uDC8E Native balance: ".concat(s)),t+=s}e.tokens&&Array.isArray(e.tokens)&&(console.log("\uD83E\uDE99 Found ".concat(e.tokens.length," tokens")),e.tokens.forEach(e=>{if(e.balance&&parseFloat(e.balance)>0){let s=0;"USDC"===e.symbol?(s=e.value_usd||parseFloat(e.balance),console.log("\uD83D\uDCB5 USDC token: ".concat(e.balance," = ").concat(s))):(s=e.value_usd||0,console.log("\uD83D\uDD38 ".concat(e.symbol," token: ").concat(s))),t+=s}}))}),console.log("\uD83D\uDCB0 Final calculated value for ".concat(e.wallet_name,": ").concat(t)),t}catch(e){console.error("⚠️ Balance API failed:",e)}return 0}catch(e){return console.error("❌ Error calculating wallet total value:",e),0}},en=async e=>{if(!p)return;let s=confirm("Are you sure you want to delete this wallet? This action cannot be undone.");if(s)try{Y(e);let s=localStorage.getItem("user_id");if(!s)throw Error("User ID not found");let t=j.find(s=>s.id===e);if(!t)throw Error("Wallet not found in local state");console.log("=== DELETE WALLET DEBUG ==="),console.log("Frontend wallet.id:",e),console.log("Backend bw_id to use:",t.bw_id),console.log("User ID:",s),console.log("Request data:",{confirmation:"delete",user_id:parseInt(s)}),console.log("===========================");let a=await m.cryptoWallet.deleteWallet(t.bw_id,{confirmation:"delete",user_id:parseInt(s)});console.log("Delete response:",a),(null==a?void 0:a.success)||(null==a?void 0:a.data)?(b(s=>s.filter(s=>s.id!==e)),console.log("Wallet deleted successfully"),alert("Wallet deleted successfully!")):(console.error("Delete failed:",a),alert("Failed to delete wallet: "+((null==a?void 0:a.error)||(null==a?void 0:a.message)||"Unknown error")))}catch(e){console.error("Failed to delete wallet:",e),alert("Failed to delete wallet: "+(e.message||"Network error"))}finally{Y(null)}},eo=e=>{e?(X(e),Q(!0)):1===j.length?(X(j[0]),Q(!0)):j.length>1?(X(j[0]),Q(!0)):alert("Please create a wallet first before importing tokens")},er=e=>{if(console.log("Selecting wallet:",e.wallet_name,"bw_id:",e.bw_id),H&&H.bw_id===e.bw_id){G(null);return}G(e)},ed=j.filter(e=>{let s=e.wallet_name.toLowerCase().includes(D.toLowerCase());return s}),ei=async()=>{if(p&&(null==i?void 0:i.user_id))try{var e;w(!0);let s="string"==typeof i.user_id?parseInt(i.user_id):i.user_id;console.log("\uD83D\uDE80 Loading wallets for user:",s);let t=new Promise((e,s)=>setTimeout(()=>s(Error("Wallet loading timeout")),15e3)),a=await Promise.race([m.cryptoWallet.getUserWallets(s),t]);if(console.log("\uD83D\uDCE6 Raw wallet API response:",a),(null==a?void 0:a.success)&&(null==a?void 0:null===(e=a.data)||void 0===e?void 0:e.wallets)){console.log("\uD83D\uDD22 Found ".concat(a.data.wallets.length," wallets, calculating balances..."));let e=[],s=a.data.wallets.length;for(let t=0;t<s;t+=3){let l=a.data.wallets.slice(t,t+3),n=await Promise.all(l.map(async(e,a)=>{var l;let n=t+a;console.log("\n\uD83D\uDCDD Processing wallet ".concat(n+1,"/").concat(s,": ").concat(e.wallet_name));let o={id:e.bw_id,bw_id:e.bw_id,wallet_name:e.wallet_name||"Unnamed Wallet",total_chains:e.total_chains||0,active_chains:e.active_chains||0,total_tokens:e.total_tokens||0,total_value_usd:e.total_value_usd||0,chain_names:e.chain_names||[],chains:e.chains||[],status:e.status||"unknown",created_at:e.created_at||new Date().toISOString()};console.log("\uD83D\uDCB0 Calculating balance for wallet: ".concat(o.wallet_name));let r=await el(o),d={...o,total_value_usd:r};return console.log("✅ Final wallet data:",{name:d.wallet_name,bw_id:d.bw_id,calculated_value:r,chains:(null===(l=d.chains)||void 0===l?void 0:l.length)||0,tokens:d.total_tokens}),d}));e.push(...n);let o=Math.min((t+3)/s*100,100);ea(o),0===t?b(e):b(e=>[...e,...n])}console.log("\uD83C\uDF89 All wallets processed with calculated values:",e.map(e=>({name:e.wallet_name,value:e.total_value_usd})))}else console.log("⚠️ No wallets found in API response"),b([])}catch(e){console.error("❌ Failed to load wallets:",e),b([]),e instanceof Error&&"Wallet loading timeout"===e.message&&console.warn("⚠️ Wallet loading took too long, showing empty state")}finally{w(!1)}};return((0,l.useEffect)(()=>{if(f&&e&&i&&p){ei();let e=setTimeout(()=>{es(!0)},1e4);return()=>clearTimeout(e)}},[f,e,i,p]),t||!f)?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)(d.T,{size:"lg"})}):e&&"APPROVED"===s?(0,a.jsx)(r.Z,{children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,a.jsx)("div",{children:(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Wallets"})}),(0,a.jsxs)(c.z,{className:"light-shadow-hover dark:dark-shadow-hover theme-transition ".concat(O?"bg-green-600 hover:bg-green-700 text-white":"bg-blue-600 hover:bg-blue-700 text-white"),onClick:()=>{console.log("\uD83D\uDD18 Add New Wallet button clicked"),console.log("\uD83D\uDD0D Current modal state:",O),console.log("\uD83D\uDD0D SDK ready:",f),console.log("\uD83D\uDD0D Can make requests:",p),L(!0),console.log("\uD83D\uDD0D Modal state after set:",!0)},disabled:!f||!p,children:[(0,a.jsx)(_.Z,{className:"h-4 w-4 mr-2"}),f?O?"Modal Open!":"Add New Wallet":"Loading..."]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-4 mb-6 p-4 bg-card rounded-lg border",children:[(0,a.jsxs)("div",{className:"relative flex-1 min-w-64",children:[(0,a.jsx)(h.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(u.I,{placeholder:"Search wallet name",value:D,onChange:e=>k(e.target.value),className:"pl-10"})]}),(0,a.jsx)(u.I,{placeholder:"Wallet address",className:"w-48"}),(0,a.jsxs)(v.Ph,{value:S,onValueChange:A,children:[(0,a.jsx)(v.i4,{className:"w-32",children:(0,a.jsx)(v.ki,{placeholder:"Token"})}),(0,a.jsxs)(v.Bw,{children:[(0,a.jsx)(v.Ql,{value:"all",children:"All Tokens"}),(0,a.jsx)(v.Ql,{value:"usdc",children:"USDC"}),(0,a.jsx)(v.Ql,{value:"eth",children:"ETH"})]})]}),(0,a.jsxs)(v.Ph,{value:T,onValueChange:I,children:[(0,a.jsx)(v.i4,{className:"w-40",children:(0,a.jsx)(v.ki,{placeholder:"Blockchain"})}),(0,a.jsxs)(v.Bw,{children:[(0,a.jsx)(v.Ql,{value:"all",children:"All Chains"}),(0,a.jsx)(v.Ql,{value:"sepolia",children:"Sepolia"}),(0,a.jsx)(v.Ql,{value:"amoy",children:"Amoy"}),(0,a.jsx)(v.Ql,{value:"neon",children:"Neon"})]})]}),(0,a.jsxs)(v.Ph,{value:R,onValueChange:U,children:[(0,a.jsx)(v.i4,{className:"w-40",children:(0,a.jsx)(v.ki,{placeholder:"Sort By:"})}),(0,a.jsxs)(v.Bw,{children:[(0,a.jsx)(v.Ql,{value:"name",children:"Name"}),(0,a.jsx)(v.Ql,{value:"value",children:"USD Value"}),(0,a.jsx)(v.Ql,{value:"date",children:"Date Created"})]})]}),(0,a.jsx)(c.z,{variant:"outline",size:"sm",children:(0,a.jsx)(z.Z,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[!N&&(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:[ed.length," Wallets"]}),(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:["The token you're searching for isn't here?"," ",(0,a.jsx)(c.z,{variant:"link",className:"h-auto p-0 text-blue-600",onClick:()=>eo(),children:"Import token"})]})]}),!N&&ed.length>0&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,a.jsxs)("span",{children:["1 to ",ed.length," of ",ed.length]}),(0,a.jsx)(c.z,{variant:"ghost",size:"sm",disabled:!0,children:"Previous"}),(0,a.jsx)(x.C,{variant:"default",children:"1"}),(0,a.jsx)(c.z,{variant:"ghost",size:"sm",disabled:!0,children:"Next"})]})]}),(0,a.jsx)("div",{className:"space-y-3",children:N?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(d.T,{}),(0,a.jsx)("p",{className:"text-muted-foreground mt-2",children:"Loading wallets..."}),et>0&&(0,a.jsxs)("div",{className:"mt-4 max-w-md mx-auto",children:[(0,a.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground mb-1",children:[(0,a.jsx)("span",{children:"Processing wallets..."}),(0,a.jsxs)("span",{children:[Math.round(et),"%"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(et,"%")}})})]}),ee&&(0,a.jsxs)("div",{className:"mt-4 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm text-amber-800 mb-3",children:"⚠️ Loading is taking longer than expected. This might be due to network conditions or API response time."}),(0,a.jsx)(c.z,{variant:"outline",size:"sm",onClick:()=>{es(!1),ei()},className:"text-amber-800 border-amber-300 hover:bg-amber-100",children:"Retry Loading"})]})]}):0===ed.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(F.Z,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground/30"}),(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No wallets found"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Create your first wallet to get started"})]}):ed.map(e=>(0,a.jsx)("div",{className:"p-4 bg-card rounded-lg border hover:shadow-sm transition-shadow cursor-pointer ".concat(H&&H.bw_id===e.bw_id?"border-blue-500 bg-blue-50/50 dark:bg-blue-950/20":""),onClick:()=>er(e),children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900 rounded flex items-center justify-center",children:(0,a.jsx)(F.Z,{className:"h-4 w-4 text-blue-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("h3",{className:"font-semibold",children:e.wallet_name}),(0,a.jsxs)(x.C,{variant:"outline",className:"text-xs",children:["ID: ",e.bw_id]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[(0,a.jsxs)("span",{children:[e.active_chains||0," Addresses Chains"]}),(0,a.jsxs)("span",{children:[e.total_tokens||0," Tokens"]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"font-semibold",children:["≈ $",(e.total_value_usd||0).toFixed(2)]}),e.total_value_usd&&e.total_value_usd>0&&(0,a.jsx)("p",{className:"text-xs text-green-600",children:"Balance found"})]}),(0,a.jsxs)(V,{children:[(0,a.jsx)(M,{asChild:!0,children:(0,a.jsx)(c.z,{variant:"ghost",size:"sm",disabled:$===e.id,onClick:e=>{e.stopPropagation()},children:$===e.id?(0,a.jsx)(d.T,{size:"sm"}):(0,a.jsx)(P.Z,{className:"h-4 w-4"})})}),(0,a.jsxs)(K,{align:"end",children:[(0,a.jsxs)(q,{onClick:s=>{s.stopPropagation(),navigator.clipboard.writeText(e.wallet_name)},children:[(0,a.jsx)(C.Z,{className:"h-4 w-4 mr-2"}),"Copy Name"]}),(0,a.jsxs)(q,{onClick:s=>{s.stopPropagation(),eo(e)},children:[(0,a.jsx)(_.Z,{className:"h-4 w-4 mr-2"}),"Import Token"]}),(0,a.jsxs)(q,{onClick:e=>e.stopPropagation(),children:[(0,a.jsx)(W.Z,{className:"h-4 w-4 mr-2"}),"Edit Wallet"]}),(0,a.jsxs)(q,{onClick:s=>{s.stopPropagation(),en(e.id)},className:"text-destructive focus:text-destructive",children:[(0,a.jsx)(Z.Z,{className:"h-4 w-4 mr-2"}),"Delete Wallet"]})]})]})]})]})},e.id))}),(0,a.jsx)(E,{wallet:H,isOpen:!!H,onClose:()=>{console.log("Closing sidebar and resetting selection"),G(null)},onImportToken:e=>eo(e)}),(0,a.jsx)(g,{isOpen:O,onClose:()=>L(!1),onWalletCreated:ei}),(0,a.jsx)(y,{isOpen:B,onClose:()=>{Q(!1),X(null)},onTokenImported:()=>{console.log("Token imported successfully, reloading wallets..."),ei()},selectedWallet:J}),!1]})}):null}J.displayName=R.Z0.displayName},2609:function(e,s,t){"use strict";t.d(s,{$N:function(){return h},Vq:function(){return d},cZ:function(){return m},fK:function(){return x},hg:function(){return i}});var a=t(7437),l=t(2265),n=t(8712),o=t(2549),r=t(9311);let d=n.fC,i=n.xz,c=n.h_;n.x8;let u=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(n.aV,{ref:s,className:(0,r.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...l})});u.displayName=n.aV.displayName;let m=l.forwardRef((e,s)=>{let{className:t,children:l,...d}=e;return(0,a.jsxs)(c,{children:[(0,a.jsx)(u,{}),(0,a.jsxs)(n.VY,{ref:s,className:(0,r.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...d,children:[l,(0,a.jsxs)(n.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=n.VY.displayName;let x=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,r.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...t})};x.displayName="DialogHeader";let h=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(n.Dx,{ref:s,className:(0,r.cn)("text-lg font-semibold leading-none tracking-tight",t),...l})});h.displayName=n.Dx.displayName;let f=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(n.dk,{ref:s,className:(0,r.cn)("text-sm text-muted-foreground",t),...l})});f.displayName=n.dk.displayName},1908:function(e,s,t){"use strict";t.d(s,{I:function(){return o}});var a=t(7437),l=t(2265),n=t(9311);let o=l.forwardRef((e,s)=>{let{className:t,type:l,...o}=e;return(0,a.jsx)("input",{type:l,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...o})});o.displayName="Input"},6672:function(e,s,t){"use strict";t.d(s,{_:function(){return i}});var a=t(7437),l=t(2265),n=t(6743),o=t(9213),r=t(9311);let d=(0,o.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),i=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(n.f,{ref:s,className:(0,r.cn)(d(),t),...l})});i.displayName=n.f.displayName},8094:function(e,s,t){"use strict";t.d(s,{Bw:function(){return p},DI:function(){return u},Ph:function(){return c},Ql:function(){return v},i4:function(){return x},ki:function(){return m}});var a=t(7437),l=t(2265),n=t(3425),o=t(3523),r=t(9224),d=t(2442),i=t(9311);let c=n.fC,u=n.ZA,m=n.B4,x=l.forwardRef((e,s)=>{let{className:t,children:l,...r}=e;return(0,a.jsxs)(n.xz,{ref:s,className:(0,i.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...r,children:[l,(0,a.jsx)(n.JO,{asChild:!0,children:(0,a.jsx)(o.Z,{className:"h-4 w-4 opacity-50"})})]})});x.displayName=n.xz.displayName;let h=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(n.u_,{ref:s,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",t),...l,children:(0,a.jsx)(r.Z,{className:"h-4 w-4"})})});h.displayName=n.u_.displayName;let f=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(n.$G,{ref:s,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",t),...l,children:(0,a.jsx)(o.Z,{className:"h-4 w-4"})})});f.displayName=n.$G.displayName;let p=l.forwardRef((e,s)=>{let{className:t,children:l,position:o="popper",...r}=e;return(0,a.jsx)(n.h_,{children:(0,a.jsxs)(n.VY,{ref:s,className:(0,i.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===o&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:o,...r,children:[(0,a.jsx)(h,{}),(0,a.jsx)(n.l_,{className:(0,i.cn)("p-1","popper"===o&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:l}),(0,a.jsx)(f,{})]})})});p.displayName=n.VY.displayName;let g=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(n.__,{ref:s,className:(0,i.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...l})});g.displayName=n.__.displayName;let v=l.forwardRef((e,s)=>{let{className:t,children:l,...o}=e;return(0,a.jsxs)(n.ck,{ref:s,className:(0,i.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...o,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(n.wU,{children:(0,a.jsx)(d.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(n.eT,{children:l})]})});v.displayName=n.ck.displayName;let j=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(n.Z0,{ref:s,className:(0,i.cn)("-mx-1 my-1 h-px bg-muted",t),...l})});j.displayName=n.Z0.displayName}},function(e){e.O(0,[367,708,187,965,89,727,971,864,744],function(){return e(e.s=543)}),_N_E=e.O()}]);